# Agent

Provides functions for managing LLM agents. The basic idea is that you provide a handler function that is called when input is provided to the model _and_ when output is generated by the model. You have the opportunity to transform either one as you like.

## Getting Started

You will want to include the interface for this component. `;-)`

```clojure
(require '[nervestaple.mimeo.agent :as agent])
```

You next create an agent function that accepts a text prompt and provides it to Ollama.

```clojure
(defn chat-agent (llm-agent/define-agent connection model
                   "You are a friendly and helpful assistant."))
```

Next build up a set of middleware to handle the requests and responses from your agent. When the `start-agent` function is called a new agent loop begins that reads input from the `:request-channel`, provides it to your handler and then writes the response to the `:response-channel`.

```
(defn chat-session []
  (let [session (session/middleware)]
    (llm-agent/start-agent chat-agent
                       (-> your-fancy-handler
                           session-middleware))))
```

